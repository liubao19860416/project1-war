(function(a){a.fn.slider=function(b){var c=a.extend({},a.fn.slider.defaults,b);var e=c.showSize;var d=c.curPage;return this.each(function(){var m;var q=a(this);var g=q.find(".arrow-slider");var k=q.find("li");var i=q.find("ul:first");var p=i.find("li").size();var h=p%c.offsetSize;var n=c.offsetSize-h;if(h!=0||p<c.showSize){i.find("li:lt("+n+")").clone().appendTo(i)}if(c.offsetSize>p){a('<div class="slider-error-tips">请查看相关API</div>').appendTo(q)}var r=i.find("li").size();var f=(k.width()+c.itemPadding)*e-c.itemPadding;i.find("li").css({"padding-right":c.itemPadding}).each(function(u,v){a(v).attr("data-item","item"+u)});i.find("li:first").addClass("cur");i.width((k.width()+c.itemPadding)*r).height(k.height());g.height(k.height()).width(f);q.width(f);q.addClass("slider-"+c.type);var j;if(c.offsetSize==c.showSize&&c.showSize==1&&c.showType){a('<div class="slider-total"><span class="slider-current-page">'+d+'</span>/<span class="slider-items">'+p+"</span></div>").appendTo(q);if(c.showAmount){a(".slider-total").css({display:"display"})}else{a(".slider-total").css({display:"none"})}var t=function(){a.each(i.find("li"),function(w,u){var v=a(u).find("img").attr("alt");if(v&&c.alt){v=a('<div class="slider-tips">'+v+"</div>");v.appendTo(a(u))}})}();var l=function(){var u=[];u.push('<ul class="slider-markers">');for(var v=0;v<p;v++){u.push("<li>"+(v+1)+"</li>")}u.push("</ul>");q.append(u.join(""));a(q.find(".slider-markers li").eq(c.curPage-1)).addClass("active-marker");q.find(".slider-markers").delegate("li","mouseover",function(){clearInterval(m)});q.find(".slider-markers").delegate("li","click",function(){var w=a(this).index();if(!i.is(":animated")&&w!="undefind"){var x=i.find("li[data-item$="+w+"]").index();i.stop(true,true).animate({left:"-="+k.outerWidth(true)*1},c.speed,function(){i.css({left:0}).find("li").slice(0,x).appendTo(i);i.find("li").removeClass("cur");i.find("li:first").addClass("cur")})}a(this).siblings().removeClass("active-marker").end().addClass("active-marker");q.find(".slider-current-page").text(w+1);d=parseInt(q.find(".slider-current-page").text())});q.find(".slider-markers").delegate("li","mouseout",function(){if(!c.auto){clearInterval(m)}else{m=setInterval(function(){s(g)},c.interval)}})}()}function o(){var u='<div class="arrow-slider-left" id="J_imgLeft">left</div><div class="arrow-slider-right" id="J_imgRight">right</div>';a(u).appendTo(q);var w=q.find(".arrow-slider-left");var x=q.find(".arrow-slider-right");var v=parseInt((k.height()-w.height())/2);w.css({top:v,left:w.width()/3});x.css({top:v,right:w.width()/3});w.bind("mouseover",function(){a(this).addClass("arrow-slider-left-hover");clearInterval(m)}).bind("mouseout",function(){a(this).removeClass("arrow-slider-left-hover");if(!c.auto){clearInterval(m)}else{m=setInterval(function(){s(g)},c.interval)}});x.bind("mouseover",function(){a(this).addClass("arrow-slider-right-hover");clearInterval(m)}).bind("mouseout",function(){a(this).removeClass("arrow-slider-right-hover");if(!c.auto){clearInterval(m)}else{m=setInterval(function(){s(g)},c.interval)}});w.click(function(){if(!i.is(":animated")){i.find("li").slice(p-c.offsetSize,p).insertBefore(i.find("li:first"));i.css({left:"-="+k.outerWidth(true)*c.offsetSize});i.animate({left:"+="+k.outerWidth(true)*c.offsetSize},c.speed,function(){i.css({left:0})});if(q.find(".slider-current-page").size()>0){j=q.find(".slider-current-page");if(parseInt(j.text())==1){d=Math.ceil(r/e);j.text(d--)}else{j.text(parseInt(j.text())-1)}d=j.text();var y=q.find("ul:last").find("li");y.removeClass("active-marker");a(y.eq(j.text()-1)).addClass("active-marker")}}});x.click(function(){if(!i.is(":animated")){i.animate({left:"-="+k.outerWidth(true)*c.offsetSize},c.speed,function(){i.css({left:0}).find("li:lt("+c.offsetSize+")").appendTo(i)});if(q.find(".slider-current-page").size()>0){j=q.find(".slider-current-page");if(parseInt(j.text())==Math.ceil(r/e)){d=0;j.text(++d)}else{j.text(1+parseInt(j.text()))}d=j.text();var y=q.find("ul:last").find("li");y.removeClass("active-marker");a(y.eq(j.text()-1)).addClass("active-marker")}}})}i.animate({left:"-="+k.outerWidth(true)*c.offsetSize*(c.curPage-1)},0,function(){i.css({left:0}).find("li:lt("+c.offsetSize*(c.curPage-1)+")").appendTo(i)});g.hover(function(){clearInterval(m)},function(){if(!c.auto){clearInterval(m)}else{m=setInterval(function(){s(g)},c.interval)}});if(c.showArrow){o();if(p==c.offsetSize||p==c.showSize){c.auto=false;q.find(".arrow-slider-left").unbind("click").unbind("mouseover");q.find(".arrow-slider-right").unbind("click").unbind("mouseover")}}else{q.hover(function(){if(a(".arrow-slider-left").length==0){o()}},function(){a(".arrow-slider-left").remove();a(".arrow-slider-right").remove()})}if(c.auto){g.trigger("mouseleave")}function s(v){var w=v.find("ul:first");if(c.direction=="left"){w.animate({left:"-="+k.outerWidth(true)*c.offsetSize},c.speed,function(){w.css({left:0}).find("li:lt("+c.offsetSize+")").appendTo(w)});if(d==Math.ceil(r/e)){d=0}if(q.find(".slider-current-page").size()>0){q.find(".slider-current-page").text(++d)}}else{i.find("li").slice(p-c.offsetSize,p).insertBefore(i.find("li:first"));i.css({left:"-="+k.outerWidth(true)*c.offsetSize});i.animate({left:"+="+k.outerWidth(true)*c.offsetSize},c.speed,function(){i.css({left:0})});if(q.find(".slider-current-page").size()>0){j=q.find(".slider-current-page");if(j.text()==1){d=Math.ceil(r/e)}j.text(d--)}}var u=q.find("ul:last").find("li");u.removeClass("active-marker");a(u.eq(d-1)).addClass("active-marker")}})};a.fn.slider.defaults={offsetSize:1,showSize:1,itemPadding:0,auto:true,curPage:1,showArrow:true,speed:600,interval:2000,direction:"left",alt:false,type:"rectangle",showAmount:false,showType:true}})(jQuery);