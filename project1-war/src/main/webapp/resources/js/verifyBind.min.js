(function(c){var d=function(i,h,g,f){$form=c("#"+h);c.ajax({type:"POST",url:base+"/account/checkCodeBind.htm?d="+new Date().getMilliseconds(),data:{Num:g,checkCode:f},success:function(e){if(e==0){if(ECar.validate.init.submit(h)){$form.submit()}}else{c('[validate="yzm"]').addClass("m-member-orange");if(c('[validate="yzm"]').parent().find(".errclass").size()>0){c('[validate="yzm"]').parent().find(".errclass").show().html("<i></i>"+(e==1?"您输入的验证码有误，请重新输入!":"您输入的验证码已失效，请重新输入!")+"</span>")}else{c('[validate="yzm"]').parent().append('<span class="yzmtxt m-notice m-err errclass"><i></i>'+(e==1?"您输入的验证码有误，请重新输入!":"您输入的验证码已失效，请重新输入!")+"</span>")}if(i&&i.preventDefault){i.preventDefault()}else{window.event.returnValue=false}return false}}})};ECar.validate.init({formid:"bind-new-mobile"});c("#bind-new-mobile .btn").click(function(h){var g=c("#mobile").val();var f=c("input[validate='yzm']").val();if(ECar.validate.init.submit("bind-new-mobile")){d(h,"bind-new-mobile",g,f)}});c("#ver-mobile .btnPhone").live("click",function(h){var g=c("#mobile").val();var f=c("input[validate='yzm']").val();if(ECar.validate.init.submit("ver-mobile")){d(h,"ver-mobile",g,f)}});ECar.validate.init({formid:"fillmobile"});c("#fillmobile .btn").click(function(h){var g=c("#mobile").val();var f=c("input[validate='yzm']").val();if(ECar.validate.init.submit("fillmobile")){d(h,"fillmobile",g,f)}});c("#bind-email-loginpaswd .getcode,#bind-mobile-loginpaswd .getcode, #findPassmobile .getcode,#modifyemail .getcode,#modifyemail_updatePass .getcode,#modifymobile_upd .getcode,#modifymobile .getcode,#accoutSeruityemail .getcode,#accountSeruitymobile .getcode,#optionalForm .getcode").live("click",function(){var j=c(this);var i=c(this).parents("form").attr("id");if(i=="findPassmobile"||i=="findPassemail"){}else{c('[validate="phone"]').focus().blur();var h=c('[validate="phone"]').val();if(c(".phonetxt:visible").size()>0||h==""){return}}var g;var f;var e=i.indexOf("mail")>0?true:false;if(!e){g=c("#mobile").val();f=c("#mobTemStyle").val();typeId=c("#mobileTypeId").val()}else{g=c("#email").val();f=c("#emailTemStyle").val();typeId=c("#emailTypeId").val()}if(c(this).hasClass("getcode-gray")){return}j.addClass("getcode-gray").css("cursor","default");a(g,f,j,typeId)});function a(h,e,g,f){c.ajax({type:"POST",url:base+"/account/toGetBindCode.htm?d="+new Date().getMilliseconds(),data:{Num:h,temStyle:e,typeId:f},success:function(i){if(i!=0){ECar.dialog.alert("不要重复发送验证码");g.removeClass("getcode-gray").css("cursor","pointer")}else{c("#tab li").unbind();countDown({obj:g,speed:1000,wait:60,txt:"秒后再次发送",callback:b})}},error:function(){g.removeClass("getcode-gray")}})}function b(f){var e=c("#tab li.current").index();ECar.tab({selector:"#tab",start:e,selected:"current"});f.removeClass("getcode-gray").css("cursor","pointer").text("再次发送验证码")}c(".verify-email").live("click",function(){var e=c('input[name="url"]').val();c.ajax({type:"POST",url:base+"/account/tosendEmail.htm?d="+new Date().getMilliseconds(),data:{str:c('input[name="str"]').val(),style:c('input[name="style"]').val(),styleTem:"002"},success:function(g){var f='<div class="clearfix"><p class="btn-default"><a class="btn" href="http://'+e+'" target="_blank">查看验证邮件</a></p><p class="time-out">已经发送3次验证邮件,如果没有收到邮件,请检查邮箱是否正确,或一小时后重新验证。</p></div><p class="notic">如果点击“查看验证邮件”没反应，请自行登录个人邮箱！</p>';if(g=="0"){c(".pl-50").html(f)}}})});c(".valid-email").live("click",function(){var e=c('input[name="url"]').val();c.ajax({type:"POST",url:base+"/account/tosendEmail.htm?d="+new Date().getMilliseconds(),data:{str:c('input[name="str"]').val(),style:c('input[name="style"]').val(),styleTem:"001"},success:function(g){var f='<div class="clearfix"><p class="btn-default"><a class="btn" href="http://'+e+'" target="_blank">查看验证邮件</a></p><p class="time-out">已经发送3次验证邮件,如果没有收到邮件,请检查邮箱是否正确,或一小时后重新验证。</p></div><p class="notic">如果点击“查看验证邮件”没反应，请自行登录个人邮箱！</p>';if(g=="0"){c(".pl-50").html(f)}}})});c(".valid-email-new").live("click",function(){var e=c('input[name="url"]').val();c.ajax({type:"POST",url:base+"/account/tosendEmailnew.htm?d="+new Date().getMilliseconds(),data:{str:c('input[name="str"]').val(),style:c('input[name="style"]').val(),styleTem:"001",userid:c('input[name="userid"]').val(),username:c('input[name="username"]').val(),email:c('input[name="email"]').val()},success:function(g){var f='<div class="clearfix"><p class="btn-default"><a class="btn" href="http://'+e+'" target="_blank">查看验证邮件</a></p><p class="time-out">已经发送3次验证邮件,如果没有收到邮件,请检查邮箱是否正确,或一小时后重新验证。</p></div><p class="notic">如果点击“查看验证邮件”没反应，请自行登录个人邮箱！</p>';if(g=="0"){c(".pl-50").html(f)}}})});c(".bind-email").live("click",function(){var e=c('input[name="url"]').val();c.ajax({type:"POST",url:base+"/account/tosendEmail.htm?d="+new Date().getMilliseconds(),data:{str:c('input[name="str"]').val(),style:c('input[name="style"]').val(),styleTem:"007"},success:function(g){var f='<div class="clearfix"><p class="btn-default"><a class="btn" href="http://'+e+'" target="_blank">查看验证邮件</a></p><p class="time-out">已经发送3次验证邮件,如果没有收到邮件,请检查邮箱是否正确,或一小时后重新验证。</p></div>';if(g=="0"){c(".pl-50").html(f)}}})});c(".edit-email").live("click",function(){var e=c('input[name="url"]').val();c.ajax({type:"POST",url:base+"/account/tosendEmail.htm?d="+new Date().getMilliseconds(),data:{str:c('input[name="str"]').val(),style:c('input[name="style"]').val(),styleTem:"007"},success:function(g){var f='<div class="clearfix"><p class="btn-default"><a class="btn" href="http://'+e+'" target="_blank">查看验证邮件</a></p><p class="time-out">已经发送3次验证邮件,如果没有收到邮件,请检查邮箱是否正确,或一小时后重新验证。</p></div><p class="notic">如果点击“查看验证邮件”没反应，请自行登录个人邮箱！</p>';if(g=="0"){c(".pl-50").html(f)}}})});c(".edit-email-more").live("click",function(){var e=c('input[name="url"]').val();c.ajax({type:"POST",url:base+"/account/tosendEmail.htm?d="+new Date().getMilliseconds(),data:{str:c('input[name="str"]').val(),style:c('input[name="style"]').val(),styleTem:"007"},success:function(g){var f='<div class="clearfix"><p class="btn-default"><a class="btn" href="http://'+e+'" target="_blank">查看验证邮件</a></p><p class="time-out">已经发送3次验证邮件,如果没有收到邮件,请检查邮箱是否正确,或一小时后重新验证。</p></div>';if(g=="0"){c(".pl-50").html(f)}}})})})(jQuery);